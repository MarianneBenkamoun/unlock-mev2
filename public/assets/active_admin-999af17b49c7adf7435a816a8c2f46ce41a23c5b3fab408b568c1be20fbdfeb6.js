"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}window.ActiveAdmin={};var _slicedToArray=function(){function n(e,t){var n=[],i=!0,o=!1,a=undefined;try{for(var r,c=e[Symbol.iterator]();!(i=(r=c.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){o=!0,a=l}finally{try{!i&&c["return"]&&c["return"]()}finally{if(o)throw a}}return n}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();!function(n){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"turbolinksVisit",value:function(e){var t=[n.location.pathname,"?",this.toQueryString(e)].join("");Turbolinks.visit(t)}},{key:"queryString",value:function(){return(n.location.search||"").replace(/^\?/,"")}},{key:"queryStringToParams",value:function(){var o=function(e){return decodeURIComponent((e||"").replace(/\+/g,"%20"))};return this.queryString().split("&").map(function(e){return e.split("=")}).map(function(e){var t=_slicedToArray(e,2),n=t[0],i=t[1];return{name:o(n),value:o(i)}})}},{key:"toQueryString",value:function(e){var i=function(e){return encodeURIComponent(e||"")};return e.map(function(e){var t=e.name,n=e.value;return[i(t),i(n)]}).map(function(e){return e.join("=")}).join("&")}},{key:"turbolinks",get:function(){return"undefined"!=typeof Turbolinks&&Turbolinks.supported}}]),e}();n.activeadmin=e}(window,jQuery);var onDOMReady=function(){$(".batch_actions_selector li a").click(function(e){var t=this,n=undefined;e.stopPropagation(),e.preventDefault(),(n=$(this).data("confirm"))?ActiveAdmin.modal_dialog(n,$(this).data("inputs"),function(e){$(t).trigger("confirm:complete",e)}):$(this).trigger("confirm:complete")}),$(".batch_actions_selector li a").on("confirm:complete",function(e,t){var n=undefined;(n=JSON.stringify(t))?$("#batch_action_inputs").removeAttr("disabled").val(n):$("#batch_action_inputs").attr("disabled","disabled"),$("#batch_action").val($(this).data("action")),$("#collection_selection").submit()}),$(".batch_actions_selector").length&&$(":checkbox.toggle_all").length&&($(".paginated_collection table.index_table").length?$(".paginated_collection table.index_table").tableCheckboxToggler():$(".paginated_collection").checkboxToggler(),$(document).on("change",".paginated_collection :checkbox",function(){$(".paginated_collection :checkbox:checked").length?$(".batch_actions_selector").each(function(){$(this).aaDropdownMenu("enable")}):$(".batch_actions_selector").each(function(){$(this).aaDropdownMenu("disable")})}))};$(document).ready(onDOMReady).on("page:load turbolinks:load",onDOMReady);_createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();ActiveAdmin.DropdownMenu=function(){function i(e,t){_classCallCheck(this,i),this.options=e,this.element=t,this.$element=$(this.element);var n={fadeInDuration:20,fadeOutDuration:100,onClickActionItemCallback:null};this.options=$.extend(n,this.options),this.isOpen=!1,this.$menuButton=this.$element.find(".dropdown_menu_button"),this.$menuList=this.$element.find(".dropdown_menu_list_wrapper"),this._buildMenuList(),this._bind()}return _createClass(i,[{key:"open",value:function(){return this.isOpen=!0,this.$menuList.fadeIn(this.options.fadeInDuration),this._position(),this}},{key:"close",value:function(){return this.isOpen=!1,this.$menuList.fadeOut(this.options.fadeOutDuration),this}},{key:"destroy",value:function(){return this.$element=null,this}},{key:"isDisabled",value:function(){return this.$menuButton.hasClass("disabled")}},{key:"disable",value:function(){this.$menuButton.addClass("disabled")}},{key:"enable",value:function(){this.$menuButton.removeClass("disabled")}},{key:"option",value:function(e,t){return $.isPlainObject(e)?this.options=$.extend(!0,this.options,e):null!=e?this.options[e]:this.options[e]=t}},{key:"_buildMenuList",value:function(){this.$nipple=$('<div class="dropdown_menu_nipple"></div>'),this.$menuList.prepend(this.$nipple),this.$menuList.hide()}},{key:"_bind",value:function(){var e=this;$("body").click(function(){e.isOpen&&e.close()}),this.$menuButton.click(function(){return e.isDisabled()||(e.isOpen?e.close():e.open()),!1})}},{key:"_position",value:function(){this.$menuList.css("top",this.$menuButton.position().top+this.$menuButton.outerHeight()+10);var e=this.$menuButton.position().left,t=this.$menuButton.outerWidth()/2,n=e+2*t,i=this.$menuList.outerWidth()/2,o=this.$nipple.outerWidth()/2,a=$(window).width(),r=e+t-i,c=e+t+i;r<0?(this.$menuList.css("left",e),this.$nipple.css("left",t-o)):a<c?(this.$menuList.css("right",a-n),this.$nipple.css("right",t-o)):(this.$menuList.css("left",r),this.$nipple.css("left",i-o))}}]),i}(),$.widget.bridge("aaDropdownMenu",ActiveAdmin.DropdownMenu);onDOMReady=function(){return $(".dropdown_menu").aaDropdownMenu()};$(document).ready(onDOMReady).on("page:load turbolinks:load",onDOMReady),$(function(){$(document).on("click","a.button.has_many_remove",function(e){e.preventDefault();var t=$(this).closest(".has_many_container"),n=$(this).closest("fieldset");return recompute_positions(t),t.trigger("has_many_remove:before",[n,t]),n.remove(),t.trigger("has_many_remove:after",[n,t])}),$(document).on("click","a.button.has_many_add",function(e){var t=undefined;e.preventDefault();var n=$(this).closest(".has_many_container");if(n.trigger(t=$.Event("has_many_add:before"),[n]),!t.isDefaultPrevented()){var i=n.data("has_many_index")||n.children("fieldset").length-1;n.data({has_many_index:++i});var o=new RegExp($(this).data("placeholder"),"g"),a=$(this).data("html").replace(o,i),r=$(a).insertBefore(this);return recompute_positions(n),n.trigger("has_many_add:after",[r,n])}}),$(document).on("change",'.has_many_container[data-sortable] :input[name$="[_destroy]"]',function(){recompute_positions($(this).closest(".has_many"))}),init_sortable(),$(document).on("has_many_add:after",".has_many_container",init_sortable)});var init_sortable=function(){var e=$(".has_many_container[data-sortable]:not(.ui-sortable)");e.sortable({items:"> fieldset",handle:"> ol > .handle",start:function(e,t){t.item.css({opacity:.3})},stop:function(e,t){t.item.css({opacity:1}),recompute_positions($(this))}}),e.each(recompute_positions)},recompute_positions=function(e){var n=(e=e instanceof jQuery?e:$(this)).data("sortable"),i=parseInt(e.data("sortable-start")||0,10);e.children("fieldset").each(function(){var e=$(this).find("> ol > .input > :input[name$='[_destroy]']"),t=$(this).find("> ol > .input > :input[name$='["+n+"]']");t.length&&t.val(e.is(":checked")?"":i++)})};ActiveAdmin.modal_dialog=function(e,t,n){var i='<form id="dialog_confirm" title="'+e+'"><ul>';for(var o in t){var a,r,c,l=t[o];if(/^(datepicker|checkbox|text|number)$/.test(l))c="input";else if("textarea"===l)c="textarea";else{if(!$.isArray(l))throw new Error("Unsupported input type: {"+o+": "+l+"}");var s=["select","option",l,""];c=s[0],a=s[1],r=s[2],l=s[3]}var u="datepicker"===l?l:"";i+="<li>\n      <label>"+(o.charAt(0).toUpperCase()+o.slice(1))+"</label>\n      <"+c+' name="'+o+'" class="'+u+'" type="'+l+'">'+(r?function(){var n=[];return r.forEach(function(e){var t=$("<"+a+"/>");$.isArray(e)?t.text(e[0]).val(e[1]):t.text(e),n.push(t.wrap("<div>").parent().html())}),n}().join(""):"")+"</"+c+"></li>";var d=[];c=d[0],a=d[1],r=d[2],l=d[3],u=d[4]}i+="</ul></form>";var h=$(i).appendTo("body");$("body").trigger("modal_dialog:before_open",[h]),h.dialog({modal:!0,open:function(){$("body").trigger("modal_dialog:after_open",[h])},dialogClass:"active_admin_dialog",buttons:{OK:function(){n($(this).serializeObject()),$(this).dialog("close")},Cancel:function(){$(this).dialog("close").remove()}}})};_createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();!function(o,t){var e=function(){function i(e){_classCallCheck(this,i),this.element=e}return _createClass(i,[{key:"update",value:function(){var e=t.queryStringToParams().filter(function(e){var t=e.name;return"per_page"!=t||"page"!=t});e.push({name:"per_page",value:this.element.value}),t.turbolinks?t.turbolinksVisit(e):window.location.search=t.toQueryString(e)}}],[{key:"_jQueryInterface",value:function(n){return this.each(function(){var e=o(this),t=e.data("perPage");t||(t=new i(this),e.data("perPage",t)),"update"===n&&t[n]()})}}]),i}();o(document).on("change",".pagination_per_page > select",function(){e._jQueryInterface.call(o(this),"update")}),o.fn.perPage=e._jQueryInterface,o.fn.perPage.Constructor=e}(jQuery,window.activeadmin);_createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();ActiveAdmin.CheckboxToggler=function(){function n(e,t){_classCallCheck(this,n),this.options=e,this.container=t,this._init(),this._bind()}return _createClass(n,[{key:"option",value:function(){}},{key:"_init",value:function(){if(!this.container)throw new Error("Container element not found");if(this.$container=$(this.container),!this.$container.find(".toggle_all").length)throw new Error('"toggle all" checkbox not found');this.toggle_all_checkbox=this.$container.find(".toggle_all"),this.checkboxes=this.$container.find(":checkbox").not(this.toggle_all_checkbox)}},{key:"_bind",value:function(){var t=this;this.checkboxes.change(function(e){return t._didChangeCheckbox(e.target)}),this.toggle_all_checkbox.change(function(){return t._didChangeToggleAllCheckbox()})}},{key:"_didChangeCheckbox",value:function(){var e=this.checkboxes.filter(":checked").length,t=e===this.checkboxes.length,n=0<e&&e<this.checkboxes.length;this.toggle_all_checkbox.prop({checked:t,indeterminate:n})}},{key:"_didChangeToggleAllCheckbox",value:function(){var e=this.toggle_all_checkbox.prop("checked");return this.checkboxes.prop({checked:e}),e}}]),n}(),$.widget.bridge("checkboxToggler",ActiveAdmin.CheckboxToggler);_createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var _get=function(e,t,n){for(var i=!0;i;){var o=e,a=t,r=n;i=!1,null===o&&(o=Function.prototype);var c=Object.getOwnPropertyDescriptor(o,a);if(c!==undefined){if("value"in c)return c.value;var l=c.get;return l===undefined?undefined:l.call(r)}var s=Object.getPrototypeOf(o);if(null===s)return undefined;e=s,t=a,n=r,i=!0,c=s=undefined}};ActiveAdmin.TableCheckboxToggler=function(){function n(){_classCallCheck(this,n),_get(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments)}return _inherits(n,ActiveAdmin.CheckboxToggler),_createClass(n,[{key:"_bind",value:function(){var t=this;_get(Object.getPrototypeOf(n.prototype),"_bind",this).apply(this,arguments),this.$container.find("tbody td").click(function(e){"checkbox"!==e.target.type&&t._didClickCell(e.target)})}},{key:"_didChangeCheckbox",value:function(e){_get(Object.getPrototypeOf(n.prototype),"_didChangeCheckbox",this).apply(this,arguments),$(e).parents("tr").toggleClass("selected",e.checked)}},{key:"_didChangeToggleAllCheckbox",value:function(){this.$container.find("tbody tr").toggleClass("selected",_get(Object.getPrototypeOf(n.prototype),"_didChangeToggleAllCheckbox",this).apply(this,arguments))}},{key:"_didClickCell",value:function(e){$(e).parent("tr").find(":checkbox").click()}}]),n}(),$.widget.bridge("tableCheckboxToggler",ActiveAdmin.TableCheckboxToggler),function(i){i(document).on("focus","input.datepicker:not(.hasDatepicker)",function(){var e=i(this);if("date"!==e[0].type){var t={dateFormat:"yy-mm-dd"},n=e.data("datepicker-options");e.datepicker(i.extend(t,n))}})}(jQuery);_createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();!function(n,i){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"_clearForm",value:function(e){var t=/^(q\[|q%5B|q%5b|page|utf8|commit)/,n=i.queryStringToParams().filter(function(e){return!e.name.match(t)});e.preventDefault(),i.turbolinks?i.turbolinksVisit(n):window.location.search=i.toQueryString(n)}},{key:"_disableEmptyInputFields",value:function(e){var t=n(this).find(":input").filter(function(e,t){return""===t.value}).prop({disabled:!0}).end().serializeArray();i.turbolinks&&(e.preventDefault(),i.turbolinksVisit(t))}},{key:"_setSearchType",value:function(){n(this).siblings("input").prop({name:"q["+this.value+"]"})}}]),e}();n(document).on("click",".clear_filters_btn",e._clearForm).on("submit",".filter_form",e._disableEmptyInputFields).on("change",".filter_form_field.select_and_search select",e._setSearchType)}(jQuery,window.activeadmin);onDOMReady=function(){return $("#active_admin_content .tabs").tabs()};$(document).ready(onDOMReady).on("page:load turbolinks:load",onDOMReady),function(){}.call(this);